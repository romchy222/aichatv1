<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff">
    <title>AI –ü–æ–º–æ—â–Ω–∏–∫ - –ß–∞—Ç</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link href="{% load static %}{% static 'css/style.css' %}" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü§ñ</text></svg>">
</head>
<body>
    <div class="container-fluid">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">
                    <i class="fas fa-robot"></i>
                    AI –ü–æ–º–æ—â–Ω–∏–∫
                </div>
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                    <span class="theme-text">–¢—ë–º–Ω–∞—è —Ç–µ–º–∞</span>
                </button>
            </div>
            
            <div class="faq-search-section">
                <div class="faq-search-title">
                    <i class="fas fa-search"></i>
                    –ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
                </div>
                <input type="text" 
                       id="faq-search" 
                       class="faq-search-input" 
                       placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞...">
            </div>
            
            <div class="faq-results" id="faq-results">
                <div class="welcome-message">
                    <p>–í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π</p>
                </div>
            </div>
        </div>
        
        <!-- Main Chat Area -->
        <div class="chat-container">
            <div class="chat-header">
                <div class="chat-title">
                    <i class="fas fa-comments"></i>
                    –ß–∞—Ç —Å AI –ø–æ–º–æ—â–Ω–∏–∫–æ–º
                </div>
                <div class="chat-status">
                    <span class="status-indicator"></span>
                    –û–Ω–ª–∞–π–Ω
                </div>
            </div>
            
            <div class="messages-container" id="messages-container">
                <div class="welcome-message" id="welcome-message">
                    <h3>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AI –ü–æ–º–æ—â–Ω–∏–∫!</h3>
                    <p>–Ø –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å –≤–∞–º —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö, —Å—Ç–∏–ø–µ–Ω–¥–∏—è—Ö, —ç–∫–∑–∞–º–µ–Ω–∞—Ö –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏.</p>
                    
                    <div class="welcome-suggestions">
                        <button class="suggestion-button" onclick="sendSuggestion('–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π')">
                            üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π
                        </button>
                        <button class="suggestion-button" onclick="sendSuggestion('–î–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è')">
                            üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è
                        </button>
                        <button class="suggestion-button" onclick="sendSuggestion('–°—Ç–∏–ø–µ–Ω–¥–∏–∏ –∏ –ª—å–≥–æ—Ç—ã')">
                            üí∞ –°—Ç–∏–ø–µ–Ω–¥–∏–∏ –∏ –ª—å–≥–æ—Ç—ã
                        </button>
                        <button class="suggestion-button" onclick="sendSuggestion('–≠–∫–∑–∞–º–µ–Ω—ã –∏ –∑–∞—á–µ—Ç—ã')">
                            üìù –≠–∫–∑–∞–º–µ–Ω—ã –∏ –∑–∞—á–µ—Ç—ã
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="input-area">
                <div class="input-container">
                    <form id="chat-form" class="input-form">
                        <div class="input-wrapper">
                            <textarea id="message-input" 
                                     class="message-input" 
                                     placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..."
                                     rows="1"
                                     maxlength="2000"></textarea>
                            <button type="submit" class="send-button" id="send-button">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="{% load static %}{% static 'js/themes.js' %}"></script>
    <script src="{% load static %}{% static 'js/chat.js' %}"></script>
    
    <script>
        // Russian translations for JavaScript
        window.translations = {
            'typing': '–ø–µ—á–∞—Ç–∞–µ—Ç...',
            'error_occurred': '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞',
            'try_again': '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑',
            'no_results': '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã',
            'search_placeholder': '–ü–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π...',
            'send_message': '–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ',
            'you': '–í—ã',
            'assistant': '–ü–æ–º–æ—â–Ω–∏–∫',
            'copy': '–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å',
            'copied': '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!',
            'regenerate': '–ü–æ–≤—Ç–æ—Ä–∏—Ç—å',
            'delete': '–£–¥–∞–ª–∏—Ç—å',
            'confirm_delete': '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ?',
            'connection_error': '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É',
            'message_too_long': '–°–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ',
            'empty_message': '–°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º',
            'loading': '–ó–∞–≥—Ä—É–∑–∫–∞...',
            'categories': {
                'schedules': '–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ',
                'documents': '–î–æ–∫—É–º–µ–Ω—Ç—ã',
                'scholarships': '–°—Ç–∏–ø–µ–Ω–¥–∏–∏',
                'exams': '–≠–∫–∑–∞–º–µ–Ω—ã',
                'administration': '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è',
                'general': '–û–±—â–∏–µ'
            }
        };
        
        // Initialize session ID
        let sessionId = localStorage.getItem('sessionId');
        if (!sessionId) {
            sessionId = 'session_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();
            localStorage.setItem('sessionId', sessionId);
        }
        
        // Auto-resize textarea
        const messageInput = document.getElementById('message-input');
        messageInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });
        
        // Send message on Enter (but not Shift+Enter)
        messageInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                document.getElementById('chat-form').dispatchEvent(new Event('submit'));
            }
        });
        
        // Handle suggestion clicks
        function sendSuggestion(message) {
            document.getElementById('message-input').value = message;
            document.getElementById('chat-form').dispatchEvent(new Event('submit'));
        }
        
        // Mobile sidebar toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }
        
        // Add mobile menu button for small screens
        if (window.innerWidth <= 768) {
            const chatHeader = document.querySelector('.chat-header');
            const mobileMenuBtn = document.createElement('button');
            mobileMenuBtn.className = 'mobile-menu-btn';
            mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
            mobileMenuBtn.onclick = toggleSidebar;
            chatHeader.insertBefore(mobileMenuBtn, chatHeader.firstChild);
        }
        
        // Load chat history on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadChatHistory();
        });
    </script>
</body>
</html>