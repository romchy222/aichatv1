# Generated by Django 5.2.4 on 2025-07-20 06:34

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('agent', '0007_analytics_eventschedule_notification_userprofile_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.AddField(
            model_name='chatsession',
            name='title',
            field=models.CharField(blank=True, help_text='–ù–∞–∑–≤–∞–Ω–∏–µ –±–µ—Å–µ–¥—ã', max_length=200),
        ),
        migrations.AlterField(
            model_name='chatmessage',
            name='message_type',
            field=models.CharField(choices=[('user', 'User'), ('assistant', 'Assistant'), ('system', 'System'), ('voice', 'Voice'), ('image', 'Image')], max_length=10),
        ),
        migrations.CreateModel(
            name='ChatProject',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(help_text='–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞', max_length=100)),
                ('description', models.TextField(blank=True, help_text='–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞')),
                ('project_type', models.CharField(choices=[('academic', '–£—á—ë–±–∞'), ('research', '–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è'), ('personal', '–õ–∏—á–Ω–æ–µ'), ('work', '–†–∞–±–æ—Ç–∞'), ('general', '–û–±—â–µ–µ')], default='general', max_length=20)),
                ('color', models.CharField(default='#0D1B2A', help_text='–¶–≤–µ—Ç —Ç–µ–º—ã (hex)', max_length=7)),
                ('icon', models.CharField(default='fas fa-folder', help_text='FontAwesome –∏–∫–æ–Ω–∫–∞', max_length=20)),
                ('custom_prompt', models.TextField(blank=True, help_text='–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI')),
                ('allowed_file_types', models.JSONField(default=list, help_text='–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤')),
                ('max_context_messages', models.IntegerField(default=20, help_text='–ú–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ')),
                ('session_id', models.CharField(blank=True, max_length=100, null=True)),
                ('is_shared', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Chat Project',
                'verbose_name_plural': 'Chat Projects',
                'ordering': ['-updated_at'],
            },
        ),
        migrations.AddField(
            model_name='chatsession',
            name='project',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sessions', to='agent.chatproject'),
        ),
        migrations.CreateModel(
            name='ConversationSummary',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('summary', models.TextField(help_text='–ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –±–µ—Å–µ–¥—ã')),
                ('key_topics', models.JSONField(default=list, help_text='–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–º—ã –æ–±—Å—É–∂–¥–µ–Ω–∏—è')),
                ('action_items', models.JSONField(default=list, help_text='–ó–∞–¥–∞—á–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è')),
                ('message_count', models.IntegerField(default=0)),
                ('date_range_start', models.DateTimeField()),
                ('date_range_end', models.DateTimeField()),
                ('generated_by', models.CharField(default='ai', max_length=50)),
                ('confidence_score', models.FloatField(default=0.0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('project', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='agent.chatproject')),
                ('session', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='summaries', to='agent.chatsession')),
            ],
            options={
                'verbose_name': 'Conversation Summary',
                'verbose_name_plural': 'Conversation Summaries',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='MessageAttachment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('file', models.FileField(upload_to='attachments/%Y/%m/%d/')),
                ('attachment_type', models.CharField(choices=[('image', '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ'), ('document', '–î–æ–∫—É–º–µ–Ω—Ç'), ('audio', '–ê—É–¥–∏–æ'), ('video', '–í–∏–¥–µ–æ'), ('file', '–§–∞–π–ª')], max_length=20)),
                ('original_filename', models.CharField(max_length=255)),
                ('file_size', models.BigIntegerField()),
                ('mime_type', models.CharField(max_length=100)),
                ('analysis_result', models.JSONField(blank=True, help_text='–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ AI', null=True)),
                ('extracted_text', models.TextField(blank=True, help_text='–ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('message', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attachments', to='agent.chatmessage')),
            ],
            options={
                'verbose_name': 'Message Attachment',
                'verbose_name_plural': 'Message Attachments',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='UserMood',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('mood', models.CharField(choices=[('happy', 'üòä –†–∞–¥–æ—Å—Ç–Ω–æ–µ'), ('neutral', 'üòê –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ'), ('sad', 'üò¢ –ì—Ä—É—Å—Ç–Ω–æ–µ'), ('angry', 'üò† –ó–ª–æ–µ'), ('excited', 'ü§© –í–∑–≤–æ–ª–Ω–æ–≤–∞–Ω–Ω–æ–µ'), ('confused', 'üòï –°–º—É—â–µ–Ω–Ω–æ–µ'), ('frustrated', 'üò§ –†–∞—Å—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ'), ('calm', 'üòå –°–ø–æ–∫–æ–π–Ω–æ–µ')], max_length=20)),
                ('confidence', models.FloatField(default=0.0, help_text='–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (0-1)')),
                ('detected_keywords', models.JSONField(default=list)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('message_trigger', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='agent.chatmessage')),
                ('session', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='mood_tracking', to='agent.chatsession')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'User Mood',
                'verbose_name_plural': 'User Moods',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='VoiceMessage',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('audio_file', models.FileField(upload_to='voice/%Y/%m/%d/')),
                ('duration', models.FloatField(help_text='–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö')),
                ('transcription', models.TextField(blank=True, help_text='–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Ä–µ—á–∏')),
                ('confidence', models.FloatField(default=0.0, help_text='–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (0-1)')),
                ('status', models.CharField(choices=[('uploading', '–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è'), ('transcribing', '–†–∞—Å–ø–æ–∑–Ω–∞–µ—Ç—Å—è'), ('completed', '–ì–æ—Ç–æ–≤–æ'), ('failed', '–û—à–∏–±–∫–∞')], default='uploading', max_length=20)),
                ('error_message', models.TextField(blank=True)),
                ('detected_language', models.CharField(blank=True, max_length=10)),
                ('emotion', models.CharField(blank=True, help_text='–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —ç–º–æ—Ü–∏—è', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('processed_at', models.DateTimeField(blank=True, null=True)),
                ('chat_message', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='voice_data', to='agent.chatmessage')),
            ],
            options={
                'verbose_name': 'Voice Message',
                'verbose_name_plural': 'Voice Messages',
                'ordering': ['-created_at'],
            },
        ),
    ]
